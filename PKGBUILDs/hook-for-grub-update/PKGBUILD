#!/bin/bash

# Maintainer: manuel (see forum.endeavouros.com)

pkgname=hook-for-grub-update
pkgdesc=""
url="https://github.com/manuel-192/m-m/raw/master/PKGBUILDs/$pkgname"
pkgver=23
pkgrel=1

arch=('any')
license=('GPL')
depends=(grub)
backup=(etc/grub-install-parameters-local.conf)

source=(
    $url/$pkgname
    $url/$pkgname.hook
    $url/grub-install-parameters-local.conf
)
sha512sums=('443e4a8f0534305bb2d3b4833e6f548cc3ff8565d4d94a58ba893bee984d8478f76d3f2071c8beacac634560a05f433c0cf2fea8073fac959b1e2f8e52cfc1c3'
            '2d95ee100f77542ce76164b954b520aeb5ef09963293db3ede8fb584317168d8150a1ab0fd28336c816ef2adac3bf744cf4fa76f21287ed6981e14efd11ca055'
            '226fa9dbea90696136ab246f0c6c4362356dcf01a9a5968e0602d8029e582615a61e8eb2154b6108a1442392856a1c88b138109fb79b6edbb0d2645459aa5cb6')

package() {
    local hookdir=$pkgdir/usr/share/libalpm/hooks
    local bindir=$pkgdir/usr/bin
    local etcdir=$pkgdir/etc
    local xx name

    for xx in "${source[@]}" ; do
        name=$(basename "$xx")
        case "$name" in
            *.hook) install -Dm644 $name   $hookdir/$name ;;
            *.conf) install -Dm644 $name   $etcdir/$name ;;
            *)      install -Dm755 $name   $bindir/$name ;;
        esac
    done
}
