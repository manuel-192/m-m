# Maintainer: manuel at endeavouros.com

pkgname=nvinst
pkgver=26
pkgrel=4
pkgdesc="Add/remove nvidia driver packages"
url="https://github.com/manuel-192/m-m/raw/master/PKGBUILDs/$pkgname"
arch=('any')
license=('GPL2')
replaces=()
conflicts=()
depends=()
optdepends=(
  "linux-headers: needed by nvidia-dkms or nvidia-open-dkms"
  "linux-lts-headers: needed by nvidia-dkms or nvidia-open-dkms"
  "linux-hardened-headers: needed by nvidia-dkms or nvidia-open-dkms"
  "linux-zen-headers: needed by nvidia-dkms or nvidia-open-dkms"
  "dkms: for the dkms versions of the proprietary Nvidia drivers"
  "fzf: user may select the driver from some alternatives"
)

source=(
  nvinst
  nvinst.bash-completion
)
sha512sums=('c1640545cc28ceb5bf406b63812239c9a705b2c06b19494d74b8d0550f907a25254177628e1839f1a3008b0ff0880c055ae25666dc613f4994dbfd313de44969'
            'dfeeefc4fd6ae971408a66716bdc97f4951196751ea66dddca674cda28ea691f37f1caef3f1ba927d9402e945dabaa4425c1298f7be20606b74f70b5188f44ae')

package() {
    local src file

    for src in "${source[@]}" ; do
        file="${src##*/}"
        case "$src" in
            *.bash-completion) install -Dm644 "$file"  "$pkgdir/usr/share/bash-completion/completions/${file%.*}" ;;
            *)                 install -Dm755 "$file"  "$pkgdir/usr/bin/$file"
        esac
    done
}
