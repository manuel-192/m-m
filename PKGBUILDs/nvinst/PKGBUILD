# Maintainer: manuel at endeavouros.com

pkgname=nvinst
pkgver=26
pkgrel=2
pkgdesc="Add/remove nvidia driver packages"
url="https://github.com/manuel-192/m-m/raw/master/PKGBUILDs/$pkgname"
arch=('any')
license=('GPL2')
replaces=()
conflicts=()
depends=()
optdepends=(
  "linux-headers: needed by nvidia-dkms or nvidia-open-dkms"
  "linux-lts-headers: needed by nvidia-dkms or nvidia-open-dkms"
  "linux-hardened-headers: needed by nvidia-dkms or nvidia-open-dkms"
  "linux-zen-headers: needed by nvidia-dkms or nvidia-open-dkms"
  "dkms: for the dkms versions of the proprietary Nvidia drivers"
  "fzf: user may select the driver from some alternatives"
)

source=(
  nvinst
  nvinst.bash-completion
)
sha512sums=('a2a5bdcd95fc1acadfd182310fc16106669ac4c1a8c2edaaef5938b451c31706e62599925da45e1ff364bdc5f9f431e4c8b007017d5ab315c9297bac03b2b07f'
            'dfeeefc4fd6ae971408a66716bdc97f4951196751ea66dddca674cda28ea691f37f1caef3f1ba927d9402e945dabaa4425c1298f7be20606b74f70b5188f44ae')

package() {
    local src file

    for src in "${source[@]}" ; do
        file="${src##*/}"
        case "$src" in
            *.bash-completion) install -Dm644 "$file"  "$pkgdir/usr/share/bash-completion/completions/${file%.*}" ;;
            *)                 install -Dm755 "$file"  "$pkgdir/usr/bin/$file"
        esac
    done
}
