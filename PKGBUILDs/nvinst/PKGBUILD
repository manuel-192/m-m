# Maintainer: manuel at endeavouros.com

pkgname=nvinst
pkgver=26.1
pkgrel=1
pkgdesc="Add/remove nvidia driver packages"
url="https://github.com/manuel-192/m-m/raw/master/PKGBUILDs/$pkgname"
arch=('any')
license=('GPL2')
replaces=()
conflicts=()
depends=()
optdepends=(
  "linux-headers: needed by nvidia-dkms or nvidia-open-dkms"
  "linux-lts-headers: needed by nvidia-dkms or nvidia-open-dkms"
  "linux-hardened-headers: needed by nvidia-dkms or nvidia-open-dkms"
  "linux-zen-headers: needed by nvidia-dkms or nvidia-open-dkms"
  "dkms: for the dkms versions of the proprietary Nvidia drivers"
  "fzf: user may select the driver from some alternatives"
)

source=(
  nvinst
  nvinst.bash-completion
)
sha512sums=('a07b9f64d66d037b55b58388b58f9797f9731f10d313920a95a8377b0f1f3162550aa5be6744fa4124552eae2efe01a4f0264db9668ec7aa591a9d3b8f26c89b'
            'dfeeefc4fd6ae971408a66716bdc97f4951196751ea66dddca674cda28ea691f37f1caef3f1ba927d9402e945dabaa4425c1298f7be20606b74f70b5188f44ae')

package() {
    local src file

    for src in "${source[@]}" ; do
        file="${src##*/}"
        case "$src" in
            *.bash-completion) install -Dm644 "$file"  "$pkgdir/usr/share/bash-completion/completions/${file%.*}" ;;
            *)                 install -Dm755 "$file"  "$pkgdir/usr/bin/$file"
        esac
    done
}
