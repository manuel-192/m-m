#!/bin/bash

# Run emacs by adjusting window size and colors.

Main() {
    local emacs_parameters=(--reverse-video
                            --geometry=$(Geometry)
                            "$@"
                           )
    /bin/emacs "${emacs_parameters[@]}" &>/dev/null &
}

Geometry() {
    local xrandr=$(xrandr | head -n1 | sed -e 's|.* current ||' -e 's|, maximum.*||' -e 's| x | |')  # 3840 2160
    local width=$( echo $xrandr | awk '{print $1}')
    local height=$(echo $xrandr | awk '{print $2}')
    local wanted_columns
    local wanted_rows

    case "$width" in
        3840) wanted_columns=150 ;;
        1920) wanted_columns=100 ;;
    esac
    case "$height" in
        2160) wanted_rows=60 ;;
        1080) wanted_rows=40 ;;
    esac

    # echo "${wanted_columns}x${wanted_rows}" >&2
    echo "${wanted_columns}x${wanted_rows}"
}

Main "$@"

