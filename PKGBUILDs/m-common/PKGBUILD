#!/bin/bash
# Maintainer: manuel (see forum.endeavouros.com)

pkgname=m-common
pkgdesc="Some common apps, libs, and settings."
url="https://github.com/manuel-192/m-m/raw/master/PKGBUILDs/$pkgname"
pkgver=25.12
pkgrel=1
arch=('any')
license=('GPL')

source=(
    $url/Color
    $url/bash-colors.conf
    $url/bashrc.min
    $url/echoc
    $url/glimpse-testing-updates
    $url/STOP
    $url/ReadWithTimeout
    $url/aur-from-repo
)
sha512sums=('e06fba0adc8761718c8b222dbf09b231659aa8c46501e52bf434f90f97c18e2a6c3f424d3d626f8dc99a537fae837223a753f46b7eaf12bb8d6b2ba262f87f5b'
            '745bc6d83bc333202eb70904a3daf7cc6f24db5bfecaaff0d9b21d0cfb747e103bdc750dbe516cce2553f2f2a35cebd08b6db1aa142777acb47de52c285db985'
            '9d2cbf002891af811c14f49bb9465f3d345d7c367fd3112053173f84ea093931cd036468832071476b5758e0f72fddf231b7b2299ada872aa3f5315b71e9ec92'
            'cb7269ca55afca951c8ec872cd1bc8b7c0aebd9cde3c3e166da58bb4b65a0c8ccf9f5f4a00276e16cf822d56dea2ee71a20d8919b9f472ce77b68cc9564fb7d4'
            '8a4c2e0e0ca20d003b26a61c2684a083647ef2222db8fba3744b608c9c3acfcd3524526f7ae7a89d17b40e916ba8f478f5575b442a114d30d8a6b325970dac8b'
            'd5704e73bf67b42c1391b924037105a5dbd6998f29b97806b63db99848dc8780fde826bb117517ccc5d74ee20e9b74c797375179bc6ae825cb3d33f842c4ebca'
            '72bcf57e3eaad868d45edf96c7a74b99c4d7711331b07661702282a6d4045b0a1917ae430c407dda442c266a8548e0f45d705066b96de13f38c3b29d2c96035c'
            'da90023b668034d3dd7ad4ca62c49a09adf8e1bde9ac65e8f9030bdc88d8a08871bd6fe0b1ae8427a4ac18fd86ffcf7a92f7f5218e5264099df21b6bad6662db')

package() {
    local src file
    for src in "${source[@]}" ; do
        file="${src##*/}"
        case "$file" in
            *.conf | bashrc.min | ReadWithTimeout) install -Dm644 "$file" "$pkgdir/etc/$file" ;;
            STOP)                                  install -Dm755 "$file" "$pkgdir/usr/local/bin/$file" ;;
            *)                                     install -Dm755 "$file" "$pkgdir/usr/bin/$file" ;;
        esac
    done
    pushd "$pkgdir/usr/local/bin" >/dev/null
    for file in bye disksleep hibernate logoff poweroff reboot restart ramsleep
    do
        ln -s STOP $file
    done
    popd >/dev/null
}
