#!/bin/bash

# Maintainer: manuel (see forum.endeavouros.com)

pkgname=pau
pkgdesc="Package updater, with certain useful extra features."
url="https://github.com/manuel-192/m-m/raw/master/PKGBUILDs/$pkgname"
pkgver=22.10
pkgrel=9

arch=('any')
license=('GPL')
depends=('bash')
optdepends=(
    'eos-bash-shared: nvidia vs. kernel update check'
)
conflicts=(pac)

_end=".completion"

source=(
    $url/pac$_end   # = pac.completion
    $url/pac
    $url/$pkgname
    $url/Pacman
#    $url/puu
    $url/pacman-ext
)
sha512sums=('631d75c815fd882fb12bbafb7867c9437272ec34b8bdd677ec74c4e6dd80f329bc057fdc736bdc49b2ca484f51f9c9e3fe6059d22c905c740fa3d89f0e475214'
            '79ac69479ed20fc969f2a3433bb8b149765a56c596cd942b05f36a5ef6fd5af6cb4c36c72de3a3065a6d4cbf7d93a72288a05f6394e1c86f82415af2cf5062bb'
            'ef3122cbcaceb8c1ce3c0a9ec9023bc90b70b2729de1f673bd8f3a4ce1bd867dfb294a34aca8ff9acee189c58624f02d704594f47b81b4952d952fce314978ce'
            '6fac42fadcf3fbc4cc7f82397bb4782ad8babb4f8b942efe16e7d4bdeb6bff99e528778b9f238eb0b3d2c7ca5c20657806afbbc1c124ab734b722fbbd93071a3'
            'acf298da43b0e8ecc3a1c7ad8f2b5ffd6081f54324dd36fc684b5aec0c6358871522329b1054da0ec277c37ece77fd7ffea447b07006b4246895a626462eb352')

package() {
    local item src

    for src in "${source[@]}" ; do
        item="${src##*/}"
        case "$item" in
            *$_end)
                install -Dm644 "$item"   "$pkgdir/usr/share/bash-completion/completions/$(basename "$item" $_end)" ;;
            *)
                install -Dm755 "$item"   "$pkgdir/usr/bin/$item" ;;
        esac
    done
}
