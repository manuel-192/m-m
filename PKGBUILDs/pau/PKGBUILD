#!/bin/bash

# Maintainer: manuel (see forum.endeavouros.com)

pkgname=pau
pkgdesc="Package updater, with certain useful extra features."
url="https://github.com/manuel-192/m-m/raw/master/PKGBUILDs/$pkgname"
pkgver=22.10
pkgrel=4

arch=('any')
license=('GPL')
depends=('bash')
optdepends=(
    'eos-bash-shared: nvidia vs. kernel update check'
)
conflicts=(pac)

_end=".completion"

source=(
    $url/pac$_end   # = pac.completion
    $url/pac
    $url/$pkgname
    $url/Pacman
    $url/puu
    $url/pacman-ext
)
sha512sums=('89a99213723bdbf401b9e93b0bbdb95c33ae527dab223a06dacee1a6baf4e651f4a3b7d3f2841d8d07d78a9ea179e537cfe44108dc54931387845e6a3c97f14b'
            '79ac69479ed20fc969f2a3433bb8b149765a56c596cd942b05f36a5ef6fd5af6cb4c36c72de3a3065a6d4cbf7d93a72288a05f6394e1c86f82415af2cf5062bb'
            'ef3122cbcaceb8c1ce3c0a9ec9023bc90b70b2729de1f673bd8f3a4ce1bd867dfb294a34aca8ff9acee189c58624f02d704594f47b81b4952d952fce314978ce'
            '6fac42fadcf3fbc4cc7f82397bb4782ad8babb4f8b942efe16e7d4bdeb6bff99e528778b9f238eb0b3d2c7ca5c20657806afbbc1c124ab734b722fbbd93071a3'
            '60c2cdb85a24d64480fb971e1269fb4e4cff57daed22219dcbdd496c127b839329fcc59651968ae0622568e6d349501974ae0831a62ec842ddd214e1a03b3088'
            '3c7192db6d4ca39c690ba4bc52f6fdf99dd5fa941645041ad750fc11902cdc4a333caa754cfccba46496fbbc819fe1658a03c47de8fa8c87d6619e15a8e58e1b')

package() {
    local item src

    for src in "${source[@]}" ; do
        item="${src##*/}"
        case "$item" in
            *$_end)
                install -Dm644 "$item"   "$pkgdir/usr/share/bash-completion/completions/$(basename "$item" $_end)" ;;
            *)
                install -Dm755 "$item"   "$pkgdir/usr/bin/$item" ;;
        esac
    done
}
