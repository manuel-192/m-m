#!/bin/bash

# Maintainer: manuel (see forum.endeavouros.com)

pkgname=pau
pkgdesc="Package updater, with certain useful extra features."
url="https://github.com/manuel-192/m-m/raw/master/PKGBUILDs/$pkgname"
pkgver=22.10
pkgrel=13

arch=('any')
license=('GPL')
depends=('bash')
optdepends=(
    'eos-bash-shared: nvidia vs. kernel update check'
)
conflicts=(pac)

_end=".completion"

source=(
    $url/pac$_end   # = pac.completion
    $url/pac
    $url/$pkgname
    $url/pacman-sudo-internal
#    $url/puu
    $url/pacman-ext
)
sha512sums=('28c159e0b392e5863ac6a23d2535fd9395727c67509e2b79b2b04740aea959fafb241e77e9d94d7f3541e6f6f1b15e6c1a0e721ac66535fb421cf4229a3bea8f'
            '6633d4fb8b040272aa41e5cf9f02f7854c6c5daec69c396e91f9ff9befe8df988e9e9ee8d835de2cfed9a4b9c56ce1d41831f9572855d8a7e0f60a37930f2bd6'
            '9a6be6cb18694c8ecdd49039421baefa6f5544a921c72fa302ba24ab59ee449737f7eab59f5679f9fce4dea18a2d863d083fc17bf0858a7c44dc7d70f2f60d51'
            '365621acaa6b51ed0192c332b5eb1e96ecb0eab627713e4e8e7514482ee82e6040e1d54b9ff9101f07ce004476f7c8d070f86c38e6081c662d432871abfa2a1a'
            '20e088b00c9a42db712738199b29247eb6d12649fe363446c828e0e7ef12cfb21eb7f95f2964e82b5e32f5619074f665ec8e9e6f8bfd4d835dd4d8d3b35da5e2')

package() {
    local item src

    for src in "${source[@]}" ; do
        item="${src##*/}"
        case "$item" in
            *$_end)
                install -Dm644 "$item"   "$pkgdir/usr/share/bash-completion/completions/$(basename "$item" $_end)" ;;
            *)
                install -Dm755 "$item"   "$pkgdir/usr/bin/$item" ;;
        esac
    done
}
