#!/bin/bash

# Maintainer: manuel (see forum.endeavouros.com)

pkgname=pacman-ext
pkgdesc="Pacman wrapper with certain useful extra features mainly for update."
url="https://github.com/manuel-192/m-m/raw/master/PKGBUILDs/$pkgname"
pkgver=22.12
pkgrel=5

arch=('any')
license=('GPL')
depends=('bash')
optdepends=(
    'eos-bash-shared: nvidia vs. kernel update check'
    'expac: for select-and-install'
)
conflicts=(pac pau)

source=(
    $url/pac
    $url/pac.completion
    $url/pacman-ext
    $url/pacman-ext.completion
    $url/pacman-ext-checks
    $url/pacman-sudo-internal
    $url/pau
    $url/pacm
    $url/mirror-swap-eos
    $url/Build
)
sha512sums=('6633d4fb8b040272aa41e5cf9f02f7854c6c5daec69c396e91f9ff9befe8df988e9e9ee8d835de2cfed9a4b9c56ce1d41831f9572855d8a7e0f60a37930f2bd6'
            '28c159e0b392e5863ac6a23d2535fd9395727c67509e2b79b2b04740aea959fafb241e77e9d94d7f3541e6f6f1b15e6c1a0e721ac66535fb421cf4229a3bea8f'
            '0cc2d4812e9850d8a3fe9595db41f6560aae90c03b60dfefa693985ec5b1db4af28130489ec1966f968ff01291979a13997d77b6d217cf036d6b2788456abaa6'
            '3650b44357a84d183826dd13220606368bc957913c4fd7f8e26070d389ed0951c5792218016eac38aa33f40706c78ba8d863643cb69a04fa3cb838d608d285aa'
            'ab96744bc078f97fa675efabbe71bf43a9d0a363b5c85ce3845696b7c6a7c373d8e76c4f4c990b41057b72c4d9e688874c1c10902a3ec3292e3dcc5f37d55613'
            '54d414b22c6d7cc7126fafadd82e4766a063d8f7f7482b1dde67ffe162e9cee487fd430c93bc50b282cc81d320da92c6022c8e45d6706ab40143df7a0d19525f'
            '9a6be6cb18694c8ecdd49039421baefa6f5544a921c72fa302ba24ab59ee449737f7eab59f5679f9fce4dea18a2d863d083fc17bf0858a7c44dc7d70f2f60d51'
            '602e951b3d7250fbf3ee26b1e0da635b534eeadc6a6e9676c8df94de9257201efe743877b65621518052058979d7edcbbefade01aa15508337e8a98bfa99e920'
            '3156aedd2157f2093a4c48f2edbaae982ad1e496403195e493a2b89d6dfa81236ecac3d3c6fb4a34916ffbe36bfe322ad5b711e495483205638ff4ba828860c6'
            '37f20cd76f51aa441d213ab95a8b5efe1c197c9a3e496e0a7dbd05a4211a073a33b1d5aa6dbf68fb70a4b4e56979902c477f8c1f91dffb35d6966feb3aca411e')

package() {
    local item src

    for src in "${source[@]}" ; do
        item="${src##*/}"
        case "$item" in
            *.completion)
                install -Dm644 "$item"   "$pkgdir/usr/share/bash-completion/completions/$(basename "$item" .completion)" ;;
            *)
                install -Dm755 "$item"   "$pkgdir/usr/bin/$item" ;;
        esac
    done
}
